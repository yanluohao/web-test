<!doctype html>
<html>

<head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, minimum-scale=1.0, maximum-scale=1.0, user-scalable=no, minimal-ui" />
    <meta name="apple-mobile-web-app-capable" content="yes" />
    <meta name="format-detection" content="telephone=no, email=no" />
    <title>HTML5移动端裁剪图片上传头像代码 - 【科e互联】</title>
    <meta name="keywords" content="HTML5特效,头像上传插件,上传头像,图片裁剪,JS代码" />
    <meta name="description" content="一款HTML5移动端裁剪图片上传头像代码插件下载，该HTML5特效是一款基于jQuery+HTML5实现的图片上传裁剪生成头像特效代码。" />
    <link href="Content/clip-style.css" rel="stylesheet" type="text/css">
    <!--[if IE]>
    <script src="js/html5shiv.min.js"></script>
    <![endif]-->
    <style type="text/css">
    .clipTips {
        font-size: 20px;
        color: #ff0000;
    }
    
    .openmodal {
        cursor: pointer;
    }
    </style>
</head>

<body>
    <div id="container"></div>
    <a class="openmodal" id="openmodal">点击</a>
    <article class="htmleaf-container">
        <div id="clipArea" class="clipArea"></div>
        <div class="foot-use">
            <div class="uploader1 blue">
                <input type="button" name="file" class="button" value="打开">
                <input id="file" type="file" onchange="" accept="image/gif,image/vnd.dwg,image/vnd.dxf,image/gif,image/jp2,image/jpeg,image/png,image/vnd.svf,image/tiff" multiple />
            </div>
            <span class="clipTips">通过鼠标滚轮改变图片的大小，将图片需要剪裁的部分拖入虚线内</span>
            <button id="clipBtn" class="clipBtn">截取</button>
        </div>
        <div id="view"></div>
    </article>
    <div id="container2"></div>
    <a class="openmodal" id="openmodal2">点击</a>
    <article class="htmleaf-container">
        <div id="clipArea2" class="clipArea"></div>
        <div class="foot-use">
            <div class="uploader1 blue">
                <input type="button" name="file" class="button" value="打开">
                <input id="file2" type="file" onchange="" accept="image/gif,image/vnd.dwg,image/vnd.dxf,image/gif,image/jp2,image/jpeg,image/png,image/vnd.svf,image/tiff" multiple />
            </div>
            <span class="clipTips">通过鼠标滚轮改变图片的大小，将图片需要剪裁的部分拖入虚线内</span>
            <button id="clipBtn2" class="clipBtn">截取</button>
        </div>
        <div id="view2"></div>
    </article>
    <script src="bundles/jquery.js" type="text/javascript"></script>
    <script src="bundles/iscroll-zoom.js"></script>
    <script type="text/javascript" src="bundles/hammer.js"></script>
    <script src="bundles/jquery.photoClip.js"></script>
    <script>
    var obUrl = '';
    bindClip("clipArea", "file", "view", "clipBtn", 250, 113, "openmodal", "container");
    bindClip("clipArea2", "file2", "view2", "clipBtn2", 100, 100, "openmodal2", "container2");

    function bindClip(AreaId, fileId, viewId, clipBtnId, width, height, eventBtnId, containerId) {
        $("#" + AreaId).photoClip({
            width: width,
            height: height,
            file: "#" + fileId,
            view: "#" + viewId,
            ok: "#" + clipBtnId,
            loadStart: function() {
                console.log("照片读取中");
            },
            loadComplete: function() {
                console.log("照片读取完成");
            },
            clipFinish: function(dataURL) {
                console.log(dataURL);
            }
        });
        $("#" + eventBtnId).click(function() {
            $(this).next(".htmleaf-container").show();
        })
        $("#" + clipBtnId).click(function() {
            $("#" + containerId).empty();
            $('#' + containerId).append('<img src="' + imgsource + '" align="absmiddle" style=" width: ' + width + 'px;height: ' + height + 'px;">');
            $(this).parents(".htmleaf-container").hide();
        })
    }
    </script>
</body>

</html>
